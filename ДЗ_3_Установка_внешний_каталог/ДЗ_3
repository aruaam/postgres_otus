
• добавьте свеже-созданный диск к виртуальной машине - надо зайти в режим ее редактирования и дальше выбрать пункт attach existing disk
	
В гуишке гугл клауд не нашёл где приаттачить новый диск. В additional disks он не появился как в документации описано. Сделал командой: gcloud compute instances attach-disk postgres1 --disk disk-1
 	
• проинициализируйте диск согласно инструкции и подмонтировать файловую систему, только не забывайте менять имя диска на актуальное, в вашем случае это скорее всего будет /dev/sdb - https://www.digitalocean.com/community/tutorials/how-to-partition-and-format-storage-devices-in-linux
	
Либо в инструкции по ссылке порядок неправильный, либо она устарела. Команды из раздела 'Partition the New Drive' не работали, потому что требовало обновить fstab. Даже команда 'sudo parted /dev/sda mklabel gpt'. Непонятно как его на данном этапе обновить, если лейбл только для партиции указывается. Сделал шаги от пункта 'Create a Filesystem on the New Partition' и дальше - партиция создалась и успешно смонтировалась.
	
• сделайте пользователя postgres владельцем /mnt/data - chown -R postgres:postgres /mnt/data/
• перенесите содержимое /var/lib/postgres/14 в /mnt/data - mv /var/lib/postgresql/14 /mnt/data
• попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 14 main start
• напишите получилось или нет и почему
	
Не получилось, потому что данные из базы недоступны поскольку мы их перенесли в /mnt/data
	
• задание: найти конфигурационный параметр в файлах раположенных в /etc/postgresql/10/main который надо поменять и поменяйте его
• напишите что и почему поменяли
	
Поставил data_directory = '/mnt/data/14/main', поскольку теперь это новый каталог с данными базы.
	
• попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 14 main start
• напишите получилось или нет и почему
	
Получилось не сразу. Я сперва задал data_directory = '/mnt/data' и база не запустилась. Переходами через cd и ls -la увидел где нужные файлы лежат и поправил в postgresql.conf.
	
• зайдите через через psql и проверьте содержимое ранее созданной таблицы
	
Через SELECT * FROM test увидел таблицу, которую создали ранее.
	
• задание со звездочкой *: не удаляя существующий GCE инстанс сделайте новый, поставьте на его PostgreSQL, удалите файлы с данными из /var/lib/postgres
• перемонтируйте внешний диск который сделали ранее от первой виртуальной машины ко второй и запустите PostgreSQL на второй машине так чтобы он работал с
• данными на внешнем диске, расскажите как вы это сделали и что в итоге получилось.

1. Стандартно создал инстанс postgres2, поставил PostgreSQL 14, остановил через 'pg_ctlcluster 14 main stop'.
2. Удалил данные базы через: sudo rm -r /var/lib/postgresql
3. Детачнул диск от первого инстанса: gcloud compute instances detach-disk postgres1 --disk disk-1
4. Аттачнул ко второму: gcloud compute instances attach-disk postgres2 --disk disk-1
5. Прописал партицию этого диска в fstab второго инстанса: LABEL=datapartition /mnt/data ext4 defaults 0 2
6. Прописал data_directory = '/mnt/data/14/main' в /etc/postgresql/14/main
7. Попробовал стартануть постгрес, но он /mnt/data/ найти не мог.
8. Рестартанул убунту на втором инстансе, папка '/mnt/data/14/main' нашлась, постгрес успешно стартанул при запуске ОС. 
9. Через SELECT * FROM test увидел инфу, которую в самом начале добавляли.
